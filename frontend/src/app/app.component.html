<div class="app-shell">
  <nav class="top-nav">
    <a class="brand" routerLink="/">
      <img src="assets/logo.svg" alt="Araç Kutusu logo" />
      <span>Araç Kutusu</span>
    </a>

    <!-- Desktop Navigation -->
    <div class="nav-links desktop-nav">
      <!-- Language Tools Dropdown -->
      <div class="nav-dropdown" [class.active]="isLanguageActive()">
        <button class="nav-dropdown-trigger" (click)="languageMenu.toggle($event)">
          <i class="pi pi-language"></i>
          <span>Dil Araçları</span>
          <i class="pi pi-chevron-down chevron"></i>
        </button>
        <p-menu #languageMenu [model]="languageTools" [popup]="true" appendTo="body"></p-menu>
      </div>

      <!-- Engineering Tools Dropdown -->
      <div class="nav-dropdown" [class.active]="isEngineeringActive()">
        <button class="nav-dropdown-trigger" (click)="engineeringMenu.toggle($event)">
          <i class="pi pi-cog"></i>
          <span>Mühendislik Araçları</span>
          <i class="pi pi-chevron-down chevron"></i>
        </button>
        <p-menu #engineeringMenu [model]="engineeringTools" [popup]="true" appendTo="body"></p-menu>
      </div>

      <!-- Design Tools Dropdown -->
      <div class="nav-dropdown" [class.active]="isDesignActive()">
        <button class="nav-dropdown-trigger" (click)="designMenu.toggle($event)">
          <i class="pi pi-palette"></i>
          <span>Tasarım Araçları</span>
          <i class="pi pi-chevron-down chevron"></i>
        </button>
        <p-menu #designMenu [model]="designTools" [popup]="true" appendTo="body"></p-menu>
      </div>

      <!-- Geo Tools Dropdown -->
      <div class="nav-dropdown" [class.active]="isGeoActive()">
        <button class="nav-dropdown-trigger" (click)="geoMenu.toggle($event)">
          <i class="pi pi-map"></i>
          <span>Harita Araçları</span>
          <i class="pi pi-chevron-down chevron"></i>
        </button>
        <p-menu #geoMenu [model]="geoTools" [popup]="true" appendTo="body"></p-menu>
      </div>

      <!-- File Tools Dropdown -->
      <div class="nav-dropdown" [class.active]="isFileActive()">
        <button class="nav-dropdown-trigger" (click)="fileMenu.toggle($event)">
          <i class="pi pi-file"></i>
          <span>Dosya Araçları</span>
          <i class="pi pi-chevron-down chevron"></i>
        </button>
        <p-menu #fileMenu [model]="fileTools" [popup]="true" appendTo="body"></p-menu>
      </div>

      <a routerLink="/help" routerLinkActive="active" class="nav-link">
        <i class="pi pi-question-circle"></i>
        <span>Yardım</span>
      </a>

      <p-button
        icon="pi pi-info-circle"
        [text]="true"
        [rounded]="true"
        severity="secondary"
        (onClick)="showInfoDialog()"
        pTooltip="Platform bilgileri"
      ></p-button>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
      <i class="pi" [ngClass]="mobileMenuVisible ? 'pi-times' : 'pi-bars'"></i>
    </button>
  </nav>

  <!-- Mobile Navigation -->
  @if (mobileMenuVisible) {
    <div class="mobile-nav" (click)="closeMobileMenu()">
      @for (section of sections(); track section.id) {
        <div class="mobile-nav-section">
          <span class="mobile-nav-label">{{ section.title }}</span>
          @for (tool of section.tools; track tool.id) {
            <a [routerLink]="tool.route" class="mobile-nav-link">
              <i class="pi pi-{{ tool.icon }}"></i>
              {{ tool.title }}
            </a>
          }
        </div>
      }

      <div class="mobile-nav-section">
        <a routerLink="/help" class="mobile-nav-link">
          <i class="pi pi-question-circle"></i>
          Yardım
        </a>
        <button class="mobile-nav-link" (click)="showInfoDialog(); $event.stopPropagation()">
          <i class="pi pi-info-circle"></i>
          Platform Bilgileri
        </button>
      </div>
    </div>
  }

  <div class="main-content">
    <router-outlet />
  </div>

  <footer class="page-footer">
    <div class="footer-content">
      <div class="footer-left">
        <span class="footer-title">Araç Kutusu</span>
        <span class="footer-subtitle">Dil, mühendislik, tasarım ve dosya araçları platformu</span>
      </div>
      <div class="footer-right">
        <p-tag value="Beta" icon="pi pi-bolt" severity="info" [style]="{ fontSize: '0.8rem' }"></p-tag>
      </div>
    </div>
  </footer>
</div>

<!-- Info Dialog -->
<p-dialog
  header="Platform Bilgileri"
  [(visible)]="infoDialogVisible"
  [modal]="true"
  [style]="{ width: '600px', maxWidth: '95vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="info-dialog-content">
    <div class="info-section">
      <h3><i class="pi pi-info-circle"></i> Hakkında</h3>
      <p>
        Araç Kutusu, dil, mühendislik ve tasarım alanlarında çeşitli araçlar sunan bir platformdur.
      </p>
    </div>

    @for (section of sections(); track section.id) {
      <div class="info-section">
        <h3><i class="pi pi-{{ section.icon }}"></i> {{ section.title }}</h3>
        <div class="features-list">
          @for (tool of section.tools; track tool.id) {
            <div class="feature-item">
              <i class="pi pi-check-circle"></i>
              <span>{{ tool.title }} - {{ tool.description }}</span>
            </div>
          }
        </div>
      </div>
    }
  </div>
</p-dialog>
