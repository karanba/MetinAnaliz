<div class="page-layout">
  <!-- Left Column: Input Section -->
  <div class="input-section">
    <p-card class="input-card">
      <div class="card-header">
        <div class="header-content">
          <h2>Metin Analizi</h2>
          <p class="meta">
            Türkçe metninizi girin ve YOD değerini öğrenin
          </p>
        </div>
        <p-tag
          [value]="text.length + ' karakter'"
          icon="pi pi-file-edit"
          [severity]="text.length > 0 ? 'info' : 'secondary'"
        ></p-tag>
      </div>

      <div class="field">
        <label for="inputText" class="field-label">
          <i class="pi pi-align-left"></i>
          Metniniz
        </label>
        <textarea
          id="inputText"
          pTextarea
          [(ngModel)]="text"
          [autoResize]="true"
          rows="12"
          placeholder="Analiz edilecek Türkçe metni buraya yapıştırın..."
        ></textarea>
      </div>

      <div class="action-bar">
        <p-button
          label="Analiz Et"
          icon="pi pi-bolt"
          styleClass="primary-action w-full"
          [loading]="loading"
          [disabled]="!text.trim()"
          (onClick)="analyze()"
        ></p-button>
      </div>

      <div class="error" *ngIf="errorMessage">
        <i class="pi pi-exclamation-triangle"></i>
        {{ errorMessage }}
      </div>
    </p-card>
  </div>

  <!-- Right Column: Results Section -->
  <div class="results-section">
    <!-- Loading State -->
    <p-card *ngIf="loading" class="status-card">
      <div class="loading-state">
        <p-progressSpinner
          strokeWidth="3"
          styleClass="spinner"
        ></p-progressSpinner>
        <div class="loading-content">
          <h3>Analiz ediliyor...</h3>
          <p class="meta">Metin işlendiğinde sonuçlar otomatik görünecek</p>
        </div>
      </div>
    </p-card>

    <!-- Empty State -->
    <p-card *ngIf="!result && !loading" class="status-card empty-state">
      <div class="empty-content">
        <i class="pi pi-chart-bar empty-icon"></i>
        <h3>Sonuçlar burada görünecek</h3>
        <p class="meta">Metninizi girin ve analiz butonuna basın</p>
      </div>
    </p-card>

    <!-- Results -->
    <div *ngIf="result && !loading" class="results-container">
      <app-results-panel [statistics]="result?.statistics ?? null"></app-results-panel>

      <div class="export-section" *ngIf="result">
        <p-card class="export-card">
          <div class="export-content">
            <div class="export-header">
              <div>
                <h3>Sonuçları Kaydet</h3>
                <p class="meta">Analiz sonuçlarını dışa aktarın</p>
              </div>
              <i class="pi pi-download export-icon"></i>
            </div>
            <div class="export-actions">
              <p-select
                [options]="exportFormats"
                [(ngModel)]="exportFormat"
                optionLabel="label"
                optionValue="value"
                placeholder="Format seçin"
                styleClass="export-select"
              ></p-select>
              <p-button
                label="İndir"
                icon="pi pi-download"
                styleClass="secondary-action"
                [loading]="exporting"
                [disabled]="exporting"
                (onClick)="exportResult()"
              ></p-button>
            </div>
          </div>
        </p-card>
      </div>

      <app-sentence-list [sentences]="result.sentences"></app-sentence-list>
    </div>
  </div>
</div>
